function towerGame(){let n=q(!0),i=n.getContext("2d");const d=document.getElementById("t5vv8"),r=document.getElementById("ckb7s"),o=document.querySelector(".g8sb5 span");let a,l,w,h,s;const e=5,c=50,m=300;let y=null;const u=[{x:n.width/2-n.width/6,y:150,offset:0,width:Math.min(n.width/3,m),score:0,ratio:.75}];let f={x:0,y:0,width:0};const v=()=>{u[w]={x:0,y:(w+8)*c,offset:0,width:u[w-1].width,score:0,ratio:u[w-1].width/n.width}},x=(e,t,n,i,d,o)=>{e.beginPath(),e.moveTo(t+o,n),e.lineTo(t+i-o,n),e.quadraticCurveTo(t+i,n,t+i,n+o),e.lineTo(t+i,n+d-o),e.lineTo(t+i,n+d),e.lineTo(t+o,n+d),e.lineTo(t,n+d),e.lineTo(t,n+o),e.quadraticCurveTo(t,n,t+o,n),e.closePath(),e.clip(),e.drawImage(r,0,0,4*i,200,t,n,i,d),e.restore()},g=()=>{if(!y&&"gameOver"!==s){i.clearRect(0,0,n.width,n.height),o.textContent=u.reduce((e,t)=>e+t.score,0).toString();for(let e=0;e<u.length;e++){var t=u[e];t.width=Math.min(n.width*t.ratio,m),e<u.length-1&&(t.x=n.width/2-u[0].width/2+t.offset),i.save(),x(i,t.x,500-t.y+l,t.width,c,8)}if(i.fillStyle="lightgrey",i.fillRect(f.x,500-f.y+l,f.width,c),"bounce"==s&&(u[w].x=u[w].x+h,(h=0<h&&u[w].x+u[w].width>n.width?-h:h)<0)&&u[w].x<0&&(h=-h),"fall"==s&&(u[w].y=u[w].y-5,u[w].y==u[w-1].y+c)){s="bounce";var e=u[w].x-u[w-1].x;if(Math.abs(e)>=u[w].width)return s="gameOver",void handleGameOver(!0,u.reduce((e,t)=>e+t.score,0));f={x:f.x,y:u[w].y,width:e},u[w].x>u[w-1].x?(u[w].width=u[w].width-e,u[w].offset=u[w].x-u[0].x,f.x=u[w].x+u[w].width):(f.x=u[w].x-e,u[w].width=u[w].width+e,u[w].x=u[w-1].x,u[w].offset=u[w-1].offset),u[w].ratio=u[w].width/n.width,u[w].score=Math.floor(u[w].width/u[w-1].width*100),0<h?h+=.5:h-=.5,d.style.setProperty("--k7hnd",3*w+"%"),w++,a=c,v()}f.y=f.y-5,a&&(l++,a--),window.requestAnimationFrame(g)}},t=()=>{handleGameOver(!1),u.splice(1,u.length-1),"gameOver"===s&&window.requestAnimationFrame(g),s="bounce",l=0,a=0,h=2,w=1,u[0].width=.75*n.width,d.style.setProperty("--k7hnd","0"),v(),f.y=0,document.querySelector(".pmx7g").addEventListener("pointerup",t)},p=e=>{(y=e)||window.requestAnimationFrame(g)};var E=e=>{var e=e.key||"Tap";"Enter"===e&&"gameOver"===s?t():"p"===e?p(!y):"ArrowDown"!==e&&" "!==e&&"Tap"!==e||y||"bounce"==s&&(s="fall")},E=(addListener(document,"keydown",E),n.addEventListener("pointerdown",E),()=>q(!1));addListener(window,"resize",E),d.querySelector(".lp5gq").addEventListener("pointerdown",()=>p(!y)),d.querySelector(".qm2id").addEventListener("pointerdown",()=>p(!0)),d.querySelector(".ps4lt").addEventListener("pointerdown",()=>p(!1)),document.getElementById("p3lf8").addEventListener("pointerdown",()=>p(!0)),document.getElementById("s9nf7").addEventListener("pointerdown",()=>p(!1)),t(),g(),d.querySelector(".ivn7f").classList.contains("a9mch")&&p(!0)}const q=e=>{e&&(document.getElementById("t5vv8").style.display="block");var e=document.getElementById("t7c4f");return e.width=e.parentElement.offsetWidth,e};