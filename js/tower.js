function towerGame(){let i=T(!0),n=i.getContext("2d");const d=document.getElementById("t5vv8"),r=document.getElementById("ckb7s"),o=document.querySelector(".g8sb5 span");let a,l,w,h,s;const e=5,c=50,m=300;let y=null;const u=[{x:i.width/2-i.width/6,y:150,offset:0,width:Math.min(i.width/3,m),score:0,ratio:.75}];let f={x:0,y:0,width:0};const x=()=>{u[w]={x:0,y:(w+8)*c,offset:0,width:u[w-1].width,score:0,ratio:u[w-1].width/i.width}},g=(e,t,i,n,d,o)=>{e.beginPath(),e.moveTo(t+o,i),e.lineTo(t+n-o,i),e.quadraticCurveTo(t+n,i,t+n,i+o),e.lineTo(t+n,i+d-o),e.lineTo(t+n,i+d),e.lineTo(t+o,i+d),e.lineTo(t,i+d),e.lineTo(t,i+o),e.quadraticCurveTo(t,i,t+o,i),e.closePath(),e.clip(),e.drawImage(r,0,0,4*n,200,t,i,n,d),e.restore()},p=()=>{if(!y&&"gameOver"!==s){n.clearRect(0,0,i.width,i.height),o.textContent=u.reduce((e,t)=>e+t.score,0).toString();for(let e=0;e<u.length;e++){var t=u[e];t.width=Math.min(i.width*t.ratio,m),e<u.length-1&&(t.x=i.width/2-u[0].width/2+t.offset),n.save(),g(n,t.x,500-t.y+l,t.width,c,8)}if(n.fillStyle="lightgrey",n.fillRect(f.x,500-f.y+l,f.width,c),"bounce"==s&&(u[w].x=u[w].x+h,(h=0<h&&u[w].x+u[w].width>i.width?-h:h)<0)&&u[w].x<0&&(h=-h),"fall"==s&&(u[w].y=u[w].y-5,u[w].y==u[w-1].y+c)){s="bounce";var e=u[w].x-u[w-1].x;if(Math.abs(e)>=u[w].width)return s="gameOver",void handleGameOver(!0,u.reduce((e,t)=>e+t.score,0));f={x:f.x,y:u[w].y,width:e},u[w].x>u[w-1].x?(u[w].width=u[w].width-e,u[w].offset=u[w].x-u[0].x,f.x=u[w].x+u[w].width):(f.x=u[w].x-e,u[w].width=u[w].width+e,u[w].x=u[w-1].x,u[w].offset=u[w-1].offset),u[w].ratio=u[w].width/i.width,u[w].score=Math.floor(u[w].width/u[w-1].width*100),0<h?h+=.5:h-=.5,d.style.setProperty("--k7hnd",3*w+"%"),w++,a=c,x()}f.y=f.y-5,a&&(l++,a--),window.requestAnimationFrame(p)}},t=()=>{handleGameOver(!1),u.splice(1,u.length-1),"gameOver"===s&&window.requestAnimationFrame(p),s="bounce",l=0,a=0,h=2,w=1,u[0].width=.75*i.width,d.style.setProperty("--k7hnd","0"),x(),f.y=0},v=e=>{(y=e)||window.requestAnimationFrame(p)};var q=e=>{var e=e.key||"Tap";"Enter"===e&&"gameOver"===s?t():"p"===e?v(!y):"ArrowDown"!==e&&" "!==e&&"Tap"!==e||y||"bounce"==s&&(s="fall")};addListener(document,"keydown",q),addListener(i,"pointerdown",q),addListener(window,"resize",()=>T(!1)),addListener(document.querySelector(".pmx7g"),"pointerup",t),addListener(d.querySelector(".lp5gq"),"pointerdown",()=>v(!y)),addListener(d.querySelector(".qm2id"),"pointerdown",()=>v(!0)),addListener(d.querySelector(".ps4lt"),"pointerdown",()=>v(!1)),addListener(document.getElementById("p3lf8"),"pointerdown",()=>v(!0)),addListener(document.getElementById("s9nf7"),"pointerdown",()=>v(!1)),t(),p(),d.querySelector(".ivn7f").classList.contains("a9mch")&&v(!0)}const T=e=>{e&&(document.getElementById("t5vv8").style.display="block");var e=document.getElementById("t7c4f");return e.width=e.parentElement.offsetWidth,e};