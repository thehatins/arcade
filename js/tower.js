function towerGame(){let i=L(!0),n=i.getContext("2d");const d=document.getElementById("t5vv8"),r=document.getElementById("ckb7s"),o=document.querySelector(".g8sb5 span");let l,a,s,w,h;const e=5,c=50,y=300;let m=null;const u=[{x:i.width/2-i.width/6,y:150,offset:0,width:Math.min(i.width/3,y),score:0,ratio:.75}];let f={x:0,y:0,width:0};const x=()=>{u[s]={x:0,y:(s+8)*c,offset:0,width:u[s-1].width,score:0,ratio:u[s-1].width/i.width}},g=(e,t,i,n,d,o)=>{e.beginPath(),e.moveTo(t+o,i),e.lineTo(t+n-o,i),e.quadraticCurveTo(t+n,i,t+n,i+o),e.lineTo(t+n,i+d-o),e.lineTo(t+n,i+d),e.lineTo(t+o,i+d),e.lineTo(t,i+d),e.lineTo(t,i+o),e.quadraticCurveTo(t,i,t+o,i),e.closePath(),e.clip(),e.drawImage(r,0,0,4*n,200,t,i,n,d),e.restore()},p=()=>{if(!m&&"gameOver"!==h){n.clearRect(0,0,i.width,i.height),o.textContent=u.reduce((e,t)=>e+t.score,0).toString();for(let e=0;e<u.length;e++){var t=u[e];t.width=Math.min(i.width*t.ratio,y),e<u.length-1&&(t.x=i.width/2-u[0].width/2+t.offset),n.save(),g(n,t.x,500-t.y+a,t.width,c,8)}if(n.fillStyle="lightgrey",n.fillRect(f.x,500-f.y+a,f.width,c),"bounce"==h&&(u[s].x=u[s].x+w,(w=0<w&&u[s].x+u[s].width>i.width?-w:w)<0)&&u[s].x<0&&(w=-w),"fall"==h&&(u[s].y=u[s].y-5,u[s].y==u[s-1].y+c)){h="bounce";var e=u[s].x-u[s-1].x;if(Math.abs(e)>=u[s].width)return h="gameOver",void handleGameOver(!0,u.reduce((e,t)=>e+t.score,0));f={x:f.x,y:u[s].y,width:e},u[s].x>u[s-1].x?(u[s].width=u[s].width-e,u[s].offset=u[s].x-u[0].x,f.x=u[s].x+u[s].width):(f.x=u[s].x-e,u[s].width=u[s].width+e,u[s].x=u[s-1].x,u[s].offset=u[s-1].offset),u[s].ratio=u[s].width/i.width,u[s].score=Math.floor(u[s].width/u[s-1].width*100),0<w?w+=.5:w-=.5,d.style.setProperty("--k7hnd",3*s+"%"),s++,l=c,x()}f.y=f.y-5,l&&(a++,l--),window.requestAnimationFrame(p)}},t=()=>{handleGameOver(!1),u.splice(1,u.length-1),"gameOver"===h&&window.requestAnimationFrame(p),h="bounce",a=0,l=0,w=2,s=1,u[0].width=.75*i.width,d.style.setProperty("--k7hnd","0"),x(),f.y=0},v=e=>{m=e,d.querySelector(".lp5gq").classList.toggle("pls8f"),m||window.requestAnimationFrame(p)};var q=e=>{var e=e.key||"Tap";"Enter"===e&&"gameOver"===h?t():"p"===e?v(!m):"ArrowDown"!==e&&" "!==e&&"Tap"!==e||m||"bounce"==h&&(h="fall")};addListener(document,"keydown",q),addListener(i,"pointerdown",q),addListener(window,"resize",()=>L(!1)),addListener(document.querySelector(".pmx7g"),"pointerup",t),addListener(d.querySelector(".lp5gq"),"pointerdown",()=>v(!m)),addListener(d.querySelector(".qm2id"),"pointerdown",()=>v(!0)),addListener(d.querySelector(".ps4lt"),"pointerdown",()=>v(!1)),addListener(document.getElementById("p3lf8"),"pointerdown",()=>v(!0)),addListener(document.getElementById("s9nf7"),"pointerdown",()=>v(!1)),t(),p(),d.querySelector(".ivn7f").classList.contains("a9mch")&&v(!0)}const L=e=>{e&&(document.getElementById("t5vv8").style.display="block");var e=document.getElementById("t7c4f");return e.width=e.parentElement.offsetWidth,e};